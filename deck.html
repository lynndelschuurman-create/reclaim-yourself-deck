<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=yes" />
<title>Reclaim Yourself â€” Interactive Deck</title>
<link rel="icon" href="favicon.png" />

<style>
:root {
  --bg:#e9bfb6;
  --ink:#5a3e34;
  --btn:#f1d48b;
  --btnText:#3e2b25;
}

/* Page base */
html, body {
  margin: 0;
  padding: 0;
  min-height: 100%;
  background: var(--bg);
  color: var(--ink);
  font-family: ui-serif, Georgia, serif;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* Images */
img { max-width: 100%; display: block; }

/* Generic screens */
.screen { box-sizing: border-box; padding: clamp(16px, 4vw, 32px); }

/* Centered screens */
.centered {
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

/* Intro scroll */
#introScreen {
  display: block;
  min-height: auto;
  padding-bottom: 80px;
}

/* Buttons */
.btn {
  appearance: none;
  border: 0;
  border-radius: 999px;
  padding: 12px 22px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: transform .15s ease, box-shadow .15s ease;
}

.btn-primary {
  background: var(--btn);
  color: var(--btnText);
  box-shadow: 0 4px 12px rgba(0,0,0,.18);
}

.btn-ghost {
  background: rgba(255,255,255,.45);
  color: var(--ink);
  backdrop-filter: blur(6px);
  border: 1px solid rgba(0,0,0,.08);
}

.btn-primary:active { transform: translateY(1px); }

/* Blush Guidebook Button */
.btn-guidebook {
  background: #e9bfb6;
  color: #5a3e34;
  padding: 12px 24px;
  border: none;
  .btn-guidebook {
  font-size: 1.35rem;  /* bigger */
  font-weight: 700;    /* more visible */
  border-radius: 8px;
  cursor: pointer;
  font-family: inherit;
  display: inline-block;
  text-decoration: none;
  transition: opacity 0.2s ease;
}

.btn-guidebook:hover {
  opacity: 0.85;
}

/* Deck stage */
.stage {
  position: relative;
  width: 100%;
  max-width: 980px;
  height: clamp(320px, 58svh, 520px);
  margin: 8px auto 24px;
  overflow-x: auto;
  overflow-y: hidden;
  scroll-snap-type: x mandatory;
  display: flex;
  align-items: center;
  scroll-behavior: smooth;
}

.deck {
  display: flex;
  gap: 16px;
  align-items: center;
  padding: 0 24px;
}

.deck img.card {
  width: 180px;
  aspect-ratio: 2/3;
  object-fit: cover;
  border-radius: 20px;
  box-shadow: 0 16px 36px rgba(0,0,0,.28);
  scroll-snap-align: center;
  cursor: pointer;
}

@media (max-width: 420px) {
  .deck img.card { width: 200px; }
}

/* Text styling */
.breathe { text-align: center; margin-bottom: 10px; }
.breathe strong { font-size: clamp(28px,5vw,44px); }
.breathe span { display:block; opacity:.8; font-size:clamp(16px,3.4vw,22px); margin-top:6px; }

/* Stack buttons on deck + final screens */
.pickRow,
.finalWrap .actions {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
}

.pickRow .btn,
.finalWrap .actions .btn {
  width: 240px;
  border-radius: 32px;
  padding: 12px 0;
  font-weight: 600;
  box-shadow: 0 4px 12px rgba(0,0,0,.15);
}

/* Final screen layout */
.finalWrap {
  text-align: center;
  max-width: 900px;
  padding: 0 20px;
}

.finalWrap p {
  max-width: 620px;
  margin: 0 auto 32px;
  line-height: 1.6;
}

.hidden { display: none !important; }

/* Swipe pulse */
#swipeHint {
  opacity: 0.8;
  font-style: italic;
  pointer-events: none;
  animation: gentlePulse 3s ease-in-out infinite;
}

@keyframes gentlePulse {
  0%,100% { opacity: 0.5; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.05); }
}

/* Reveal screen buttons */
#revealScreen .actions {
  display: flex !important;
  flex-direction: row !important;
  justify-content: center;
  align-items: center;
  gap: 14px;
  flex-wrap: wrap;
}

#revealScreen .actions .btn {
  width: auto !important;
  min-width: 140px;
}

a.btn { text-decoration: none; }
/* Prevent iOS Safari bottom bar from covering content */
#revealScreen {
  padding-bottom: calc(32px + env(safe-area-inset-bottom));
}

</style>
</head>

<body>

<!-- INTRO -->
<section class="screen" id="introScreen">
  <div style="display:flex;flex-direction:column;align-items:center;gap:20px;">
    <img src="img/title.jpeg" alt="Reclaim Yourself title">
    <img src="img/description.jpeg" alt="Reclaim Yourself description">
    <img src="img/instruction_01.jpeg" alt="Reclaim Yourself instruction 1">
    <img src="img/instruction_02.jpeg" alt="Reclaim Yourself instruction 2">
    <button class="btn btn-primary" id="beginBtn">Begin</button>
  </div>
</section>

<!-- DECK -->
<section class="screen centered hidden" id="deckScreen">
  <div class="breathe"><strong>Breathe.</strong><span>Let this message move through you.</span></div>
  <div class="stage"><div class="deck" id="deck"></div></div>
  <div class="pickRow">
    <button class="btn btn-ghost" id="pickForMe">Pick for Me</button>
    <button class="btn btn-ghost" id="swipeHint">Swipe</button>
  </div>
</section>

<!-- REVEAL -->
<section class="screen centered hidden" id="revealScreen">
  <div class="revealWrap" style="text-align:center;">
    <img id="revealCard" alt="Selected card" style="margin:auto;">
    <div class="actions" style="margin-top:20px;">

      <button class="btn btn-primary btn-small" id="drawAgain">Draw again</button>
      <button class="btn btn-ghost btn-small" id="goWithin">Go within</button>

      <!-- Guidebook Button -->
      <button id="guidebook-link" class="btn-guidebook" style="margin-top:16px; display:none;">
        Read the Full Guidebook Medicine
      </button>

    </div>
  </div>
</section>

<!-- FINAL -->
<section class="screen centered hidden" id="finalScreen">
  <div class="finalWrap">
    <h1>Return to yourself</h1>
    <p>
      In the quiet, your wisdom gathers itself and returns to your center.
      You are held, you are home. What you have touched through this deck is not a destination,
      but a relationship with yourself that will continue to unfold. Return to these cards when
      you feel lost, steady, or in-between. Your becoming moves in spirals, cycles, seasons, breath.
      You do not need to rush your becoming. You are already within it.
      Linger here, then step back into your life with courage.
    </p>

    <div class="actions">
      <button class="btn btn-primary" id="finalBack">Back to deck</button>
      <button class="btn btn-ghost" id="returnToIntro">Return to instructions</button>
      <a href="index.html" class="btn btn-primary">Return Home</a>
    </div>
  </div>
</section>

<script>
(function () {
  const COUNT = 36;
  const fronts = Array.from({ length: COUNT }, (_, i) =>
    `img/card_${String(i + 1).padStart(2, "0")}.jpeg`
  );
  const backSrc = "img/back.jpeg";

  const intro = document.getElementById("introScreen");
  const deckScreen = document.getElementById("deckScreen");
  const revealScreen = document.getElementById("revealScreen");
  const finalScreen = document.getElementById("finalScreen");
  const deckEl = document.getElementById("deck");
  const revealCard = document.getElementById("revealCard");

  const begin = document.getElementById("beginBtn");
  const pickForMe = document.getElementById("pickForMe");
  const drawAgain = document.getElementById("drawAgain");
  const goWithin = document.getElementById("goWithin");
  const finalBack = document.getElementById("finalBack");
  const returnToIntro = document.getElementById("returnToIntro");
  const guideBtn = document.getElementById("guidebook-link");

  /* IMPORTANT: this MUST match the actual filename exactly */
  const GUIDEBOOK_URL = "Reclaim Yourself Guidbook.pdf";

  const show = (el) => {
    [intro, deckScreen, revealScreen, finalScreen].forEach(s =>
      s.classList.toggle("hidden", s !== el)
    );
  };

  const shuffle = (arr) => arr.slice().sort(() => Math.random() - 0.5);

  function buildDeck() {
    deckEl.innerHTML = "";
    shuffle(shuffle(fronts)).forEach(src => {
      const card = document.createElement("img");
      card.className = "card";
      card.src = backSrc;
      card.dataset.front = src;
      card.addEventListener("click", () => reveal(src));
      deckEl.appendChild(card);
    });
  }

  const reveal = (src) => {
    revealCard.src = src;
    show(revealScreen);

    guideBtn.style.display = "inline-block";
    guideBtn.onclick = () => window.open(GUIDEBOOK_URL, "_blank");
  };

  begin.addEventListener("click", () => {
    buildDeck();
    show(deckScreen);
  });

  pickForMe.addEventListener("click", () => {
    const r = Math.floor(Math.random() * fronts.length);
    reveal(fronts[r]);
  });

  drawAgain.addEventListener("click", () => {
    buildDeck();
    show(deckScreen);
    guideBtn.style.display = "none";
  });

  goWithin.addEventListener("click", () => show(finalScreen));
  finalBack.addEventListener("click", () => show(deckScreen));
  returnToIntro.addEventListener("click", () => show(intro));

  show(intro);
})();
</script>

</body>
</html>
