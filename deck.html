<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=yes" />
<title>Reclaim Yourself â€” Interactive Deck</title>
<link rel="icon" href="favicon.png" />

<style>
:root {
  --bg:#e9bfb6;
  --ink:#5a3e34;
  --btn:#f1d48b;
  --btnText:#3e2b25;
}

/* Base */
html, body {
  margin: 0;
  padding: 0;
  min-height: 100%;
  background: var(--bg);
  color: var(--ink);
  font-family: ui-serif, Georgia, serif;
}

/* Images */
img { max-width: 100%; display: block; }

/* Screens */
.screen { box-sizing: border-box; padding: clamp(16px, 4vw, 32px); }

.centered {
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.hidden { display: none !important; }

/* Intro */
#introScreen {
  padding-bottom: 80px;
}

/* Buttons */
.btn {
  appearance: none;
  border: 0;
  border-radius: 999px;
  padding: 12px 22px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
}

.btn-primary {
  background: var(--btn);
  color: var(--btnText);
}

.btn-ghost {
  background: rgba(255,255,255,.45);
  color: var(--ink);
  border: 1px solid rgba(0,0,0,.08);
}

/* Deck */
.stage {
  width: 100%;
  max-width: 980px;
  height: clamp(320px, 58svh, 520px);
  overflow-x: auto;
  display: flex;
  align-items: center;
}

.deck {
  display: flex;
  gap: 16px;
  padding: 0 24px;
}

.deck img.card {
  width: 180px;
  aspect-ratio: 2/3;
  border-radius: 20px;
  box-shadow: 0 16px 36px rgba(0,0,0,.28);
  cursor: pointer;
}

/* Text */
.breathe {
  text-align: center;
  margin-bottom: 10px;
}

.breathe strong {
  font-size: clamp(28px,5vw,44px);
}

/* Button rows */
.pickRow,
.actions {
  display: flex;
  gap: 14px;
  justify-content: center;
  align-items: center;
}

/* Icon button size */
#guidebook-icon {
  padding: 10px 14px;
  font-size: 18px;
}
</style>
</head>

<body>

<!-- INTRO -->
<section class="screen" id="introScreen">
  <div style="display:flex;flex-direction:column;align-items:center;gap:20px;">
    <img src="img/title.jpeg">
    <img src="img/description.jpeg">
    <img src="img/instruction_01.jpeg">
    <img src="img/instruction_02.jpeg">
    <button class="btn btn-primary" id="beginBtn">Begin</button>
  </div>
</section>

<!-- DECK -->
<section class="screen centered hidden" id="deckScreen">
  <div class="breathe">
    <strong>Breathe.</strong>
    <div>Let this message move through you.</div>
  </div>

  <div class="stage">
    <div class="deck" id="deck"></div>
  </div>

  <div class="pickRow">
    <button class="btn btn-ghost" id="pickForMe">Pick for Me</button>
    <button class="btn btn-ghost">Swipe</button>
  </div>
</section>

<!-- REVEAL -->
<section class="screen centered hidden" id="revealScreen">
  <img id="revealCard" style="margin-bottom:20px;">

  <div class="actions">

    <!-- ðŸ“– Guidebook icon -->
    <button
      class="btn btn-ghost"
      id="guidebook-icon"
      aria-label="Open Guidebook">
      ðŸ“–
    </button>

    <button class="btn btn-primary" id="drawAgain">Draw again</button>
    <button class="btn btn-ghost" id="goWithin">Go within</button>

  </div>
</section>

<!-- FINAL -->
<section class="screen centered hidden" id="finalScreen">
  <div style="max-width:600px;text-align:center;">
    <h1>Return to yourself</h1>
    <p>
      You are already within your becoming.
      Linger, then return to your life with courage.
    </p>

    <div class="actions">
      <button class="btn btn-primary" id="finalBack">Back to deck</button>
      <button class="btn btn-ghost" id="returnToIntro">Return to instructions</button>
    </div>
  </div>
</section>

<script>
(function () {

  const COUNT = 36;
  const fronts = Array.from({ length: COUNT }, (_, i) =>
    `img/card_${String(i + 1).padStart(2, "0")}.jpeg`
  );
  const backSrc = "img/back.jpeg";

  const intro = document.getElementById("introScreen");
  const deckScreen = document.getElementById("deckScreen");
  const revealScreen = document.getElementById("revealScreen");
  const finalScreen = document.getElementById("finalScreen");

  const deckEl = document.getElementById("deck");
  const revealCard = document.getElementById("revealCard");

  const begin = document.getElementById("beginBtn");
  const pickForMe = document.getElementById("pickForMe");
  const drawAgain = document.getElementById("drawAgain");
  const goWithin = document.getElementById("goWithin");
  const finalBack = document.getElementById("finalBack");
  const returnToIntro = document.getElementById("returnToIntro");
  const guidebookIcon = document.getElementById("guidebook-icon");

  const GUIDEBOOK_URL = "Reclaim Yourself Guidbook.pdf";

  function show(el) {
    [intro, deckScreen, revealScreen, finalScreen].forEach(s =>
      s.classList.toggle("hidden", s !== el)
    );
  }

  function shuffle(arr) {
    return arr.slice().sort(() => Math.random() - 0.5);
  }

  function buildDeck() {
    deckEl.innerHTML = "";
    shuffle(fronts).forEach(src => {
      const card = document.createElement("img");
      card.className = "card";
      card.src = backSrc;
      card.onclick = () => reveal(src);
      deckEl.appendChild(card);
    });
  }

  function reveal(src) {
    revealCard.src = src;
    show(revealScreen);
  }

  begin.onclick = () => { buildDeck(); show(deckScreen); };
  pickForMe.onclick = () => reveal(fronts[Math.floor(Math.random() * fronts.length)]);
  drawAgain.onclick = () => { buildDeck(); show(deckScreen); };
  goWithin.onclick = () => show(finalScreen);
  finalBack.onclick = () => show(deckScreen);
  returnToIntro.onclick = () => show(intro);

  guidebookIcon.onclick = () => {
    window.open(GUIDEBOOK_URL, "_blank");
  };

  show(intro);

})();
</script>

</body>
</html>

